---
title: "Week 7 Lab: Correlation"
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
    css: css/style.css
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
# library(learnr)
# library(tidyverse)
# library(kableExtra)
# library(knitr)
# library(shiny)
# library(shinyjs)
# library(bslib)

baseColor <- '#4CA384'
accent1 <- '#9AD079'
accent2 <- '#C4C6C7'
accent3 <- '#19424C'
```

```{r, context = 'server'}
```

## Intro to Today's Lab

During today's lab, you'll apply the concepts discussed during this week's lecture. Each lab consists of a range of tasks, with corresponding questions you can answer. Please note that the questions are not required and not marked, although they do provide a helpful source of formative feedback that will help you gauge your understanding. 

### Learning Objectives
At the end of this lab, you will be able to:

1. Identify hypotheses which may be tested using correlations
2. Use SPSS to compute a composite score
3. Use SPSS to run a correlation
3. Properly interpret and report a correlation
4. Use the ggplot GUI to produce scatterplots, boxplots, and dot and error-bar plots


### This Week's Study

You'll be working with data adapted from a study that investigated adolescent athletes who played team sports. One area the study investigated was whether self-enhancement values (e.g., valuing power and achievement) were associated with antisocial behaviour towards members of the opposing team (see [here](https://www.tandfonline.com/doi/full/10.1080/1612197X.2017.1367951#d1e287)). You'll be investigating this association directly; you'll also produce plots using other related variables in the dataset. 

## Experiment Overview

<br>
In this experiment, you'll investigate the association between student athletes' endorsement of qualities associated with self-enhancement and reports of their antisocial behaviour towards members of the opposing team. You recruited a sample of adolescents who participated in team sports. In this dataset, participants have an average score for each of 4 measures associated with desire for power and achievement. These scores, when totaled together, will provide a measure that reflects a participant's self-enhancement values. Higher scores on this composite metric reflect stronger self-enhancement values. Participants also have an Antisocial Behaviour score, which reflects their average score on the antisocial items from the Prosocial and Antisocial Behavior in Sport Scale. Higher scores on this scale reflect a larger number of endorsed antisocial behaviours.  

You can download the dataset from the first experiment [here](https://mtruelovehill.github.io/PRM/Labs/Week7LabData.sav). It contains the following variables:

```{r, echo = F}
dat <- read.csv('https://mtruelovehill.github.io/PRM/Labs/Week7LabData.csv')
datInfo <- data.frame(VariableName = colnames(dat),
                      Description=c('Participant ID',
                                    'Levels: 1 = Female; 2 = Male',
                                    'Age in years',
                                    'Levels: 0 = Control; 1 = Mouth Obstructed; 2 = Eyes Obstructed',
                                    'Total number of correctly identified emotions; possible scores = 0 - 50'))

datInfo %>%
  kbl(col.names=c('Variable Name', 'Description')) %>%
  kable_styling(full_width = F) %>%
  row_spec(0, bold = T, color=baseColor, font_size = 18, align='l') %>%
  column_spec(1, bold = T, width = '4.5cm')
```

```{r q1, echo = FALSE}
quiz(caption = '',
     question("Which test is most appropriate to address your research question, given the study design?",
              answer("t-test"),
              answer("One-Way ANOVA", correct = T),
              answer("Repeated-Measures ANOVA"),
              message = "While all of these tests are appropriate for use with categorical independent variables and continuous dependent variables, a t-test can only test the differences between two means. Here, you have 3 groups (control, eyes obstructed, and mouth obstructed), so a single t-test will not work. Both a one-way ANOVA and a repeated-measures ANOVA can test for differences between more than 2 means, but a repeated-measures ANOVA expects that the means are connected in some way (e.g., measured from the same participants over multiple timepoints). These means are independent of each other (collected from 3 separate groups of people), so a One-Way ANOVA should be used."))
```

### Your Tasks
+ [ ] $\ $ Which variables will be correlated? 
+ [ ] $\ $ State your research question for this experiment.
+ [ ] $\ $ State your hypotheses for this experiment, both using words and statistically.

<br>

<div class="container">
<details><summary><span style = "font-weight: bold; font-size: 16pt"> Click here for a hint </span></summary>


In your research question, you should mention the independent variable, the dependent variable, and the population being studied.

To state hypotheses statistically, you should structure them in the framework of the statistical values being tested.

</details>
</div>
</br>

<div class="container">
<details><summary><span style = "font-weight: bold; font-size: 16pt"> Click here for the solution </span></summary>
<br>
<b>Possible Research Questions:</b>

Does the region of the face being obstructed affect the ability of school-aged children to make emotional inferences?

Do different types of facial coverage impact a child's ability to correctly identify emotions?

<br>

<b>Independent Variable:</b> Region of Face Obstructed (3 levels: Control/Mouth/Eyes)

<b>Dependent Variable:</b> Correct Identifications of Emotion

<br>

<b>Hypotheses:</b>

<i> General: </i>

$H_0:$ Facial obstruction will not affect the ability of school-aged children to make emotion inferences.

$H_1:$ Facial obstruction will affect the ability of school-aged children to make emotion inferences.


<i> Statistical: </i>

$H_0: \mu_{control} = \mu_{eyes} = \mu_{mouth}$

$H_1:$ at least one $\mu \neq$ the other $\mu$s

</details>
</div>
</br>


## Run the Appropriate Power Analyses 

Task Goes Here
* Maybe an a priori & a sensitivity

```{r q2, echo = FALSE}
# quiz(caption = 'Test Your Understanding',
#      question("Which type of data is C?",
#               answer("Categorical"),
#               answer("Continuous", correct = T),
#               random_answer_order = T),
#      question("Which type of data is Gender?",
#               answer("Continuous"),
#               answer('Categorical', correct = T)),
#      question("Which type of data is ClassTime?",
#               answer("Continuous"),
#               answer('Categorical', correct = T),
#               message='Categorical data are nominal or ordinal data with no numeric relationship (although they may be represented
#               numerically), while continuous data have a traditional numeric relationship; continuous data can technically take on an  
#               infinite range of values if measurement was precise enough'),
#      question('Which of the following "Measure" values used by SPSS reflects categorical data?',
#               answer('Nominal', correct = T),
#               answer('Ordinal', correct = T),
#               answer('Scale'),
#               message = 'Scale can be used for both types of continuous data (ratio and interval scales of measurement), but categorical
#               variables are split into nominal and ordinal measures. Remember that nominal data reflects purely independent categories,
#               but ordinal data has some sort of implied order (e.g. Likert Scale data, level of education).'))
```

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint Here

</details>

</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution here.

</details>

</br>


## Calculate Descriptive Data 

Task Description Here

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint Here

</details>

</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution Here.

</details>

</br>




## Visualise Your Data 

Task Here.

```{r q4, echo = FALSE}
# quiz(caption = 'Test Your Understanding',
#      question("At least one of the groups is limited in size compared to the others",
#               answer("True", correct = T),
#               answer("False"),
#               message = 'The nonbinary group is much smaller than the other two measured groups.'),
#      question_numeric("How many total datapoints do you have for the gender variable?",
#               answer(48, correct=T)),
#      question_numeric("What percentage of participants are female?",
#               answer(41.7, correct=T)),
#      question_numeric('How many nonbinary participants are in your sample?',
#               answer(2, correct=T)))
```

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint Here

</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution Here

</details>
</br>

## Check Assumptions

Task Here

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint Here.

</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution Here.

</details>
</br>

## Run ANOVA

Task Description.
* Maybe also discuss degrees of freedom here

```{r q6, echo = FALSE}
# quiz(caption = 'Test Your Understanding',
#      question("Which of the following central tendency measures could be used to describe age? Please select all that apply.",
#               answer("Mean", correct = T),
#               answer("Median", correct = T),
#               answer('Mode', correct = T),
#               message = 'All of the above could technically be used to describe the Age variable. However, it is most common to use the
#               mean, as it includes information from each observation.'),
#      question("Which of the following central tendency measures could be used to describe gender? Please select all that apply.",
#               answer("Mean"),
#               answer("Median"),
#               answer('Mode', correct = T),
#               message = 'As a categorical variable, there is no numeric relationship between values in the gender variable. Therefore, 
#               the mode is the only measure of central tendency that is appropriate to describe this variable'),
#      question_numeric("What is the average score on Assessment A?",
#               answer(39.10, correct=T)),
#      question_numeric("What is the most common age in this sample?",
#               answer(19, correct=T)),
#      question_numeric("What is the median score on Assessment D?",
#               answer(81.87, correct=T))
# )
```

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>
Hint here.
</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution here.

</details>
</br>

## Run Post-Hoc Analyses

Task here.

```{r q7, echo = FALSE}
# quiz(caption = 'Test Your Understanding',
#      question_numeric("What is the IQR for Assessment B?",
#               answer(4, correct=T),
#               message = "To get the IQR for a variable, you'll need to subtract the 25th percentile from the 75th percentile."),
#      question_numeric("What is the maximum score on Assessment C?",
#               answer(78, correct=T)),
#      question_numeric("What is the standard deviation of scores on Assessment D? Please report your answer to two decimal places.",
#               answer(2.15, correct=T))
# )
```

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint here.

</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution here.

</details>
</br>

## Calculate Effect Sizes

Task here.

```{r distPlot, echo = F}
# 
# fluidRow(column(4, 
#   sliderInput("mean","Value of Mean:", min = -6, max = 6, value = 0, step = 2),
#   sliderInput('sd', 'Value of SD:', min = 1, max = 5, value = 1, step = .25)),
#   column(8, plotOutput('distPlot')))
# 
# tags$style(HTML(".js-irs-0 .irs-single, .js-irs-0 .irs-bar-edge, .js-irs-0 .irs-bar {background: #4CA384}"))
# tags$style(HTML(".js-irs-1 .irs-single, .js-irs-1 .irs-bar-edge, .js-irs-1 .irs-bar {background: #4CA384}"))

```

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint here.

</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution here.

</details>
</br>


## Visualise the Analysis Results

Task here.

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint here.

</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution here.

</details>
</br>

## Report & Interpret

Task here.


<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for a hint </span></summary>

Hint here.

</details>
</br>

<details><summary><span style = "font-weight: bold; font-size: 16pt"> + Click here for the solution </span></summary>

Solution here.

</details>
</br>

