<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title> Regression II </title>
    <meta charset="utf-8" />
    <meta name="author" content="Monica Truelove-Hill" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# <b> Regression II </b>
]
.subtitle[
## Psychological Research Methods:<br>Data Management &amp; Analysis<br><br>
]
.author[
### Monica Truelove-Hill
]
.institute[
### Department of Clinical Psychology<br>The University of Edinburgh
]

---








### This Week's Key Topics

+ Interactions between two continuous variables

+ Simple slopes analysis

+ Centering variables


---
### Interactions

+ Recall that an **interaction** occurs when the effects of one predictor/IV on the outcome/DV change across levels of a second predictor/IV. 

+ We have already investigated categorical `\(\times\)` continuous interactions

+ We'll expand this to continuous `\(\times\)` continuous interactions:

  + The slope of the model line between a continuous predictor and the outcome changes as the values of a second continuous predictor change.

  + i.e., the association between predictor 1 and the outcome variable changes depending on the value of predictor 2. 
  
  + May also be referred to as **moderation**

---
### Expanding on Multiple Linear Regression

Recall the linear regression equation from last week:

`$$y_i = \beta_0 + \beta_1x_i + \epsilon_i$$`
Where:

.pull-left[
`\(y_i\)`: an individual's score on the outcome variable

`\(x_i\)`: an individual's score on predictor `\(x\)`

`\(\epsilon_i\)`: an individual's residual
]

.pull-right[
`\(\beta_0\)`: the model's intercept

`\(\beta_1:\)` the model's slope
]


---
### Expanding on Multiple Linear Regression

We can expand this further to include multiple variables:

`$$y_i = \beta_0 + \beta_1x_i + \beta_2z_i + \epsilon_i$$`

Where:

.pull-left[

`\(y_i\)`: an individual's score on the outcome variable

`\(x_i\)`: an individual's score on predictor `\(x\)`

`\(z_i\)`: an individual's score on predictor `\(z\)`

`\(\epsilon_i\)`: an individual's residual

]

.pull-right[
`\(\beta_0\)`: the model's intercept

`\(\beta_1:\)` the slope associated with `\(x\)`

`\(\beta_2:\)` the slope associated with `\(z\)`
]


---

### Expanding on Multiple Linear Regression

We can expand even further to include the interaction between these variables:

`$$y_i = \beta_0 + \beta_1x_i + \beta_2z_i + \beta_3\color{#4CA384}{xz_i} + \epsilon_i$$`

Where:

.pull-left[

`\(y_i\)`: an individual's score on the outcome variable

`\(x_i\)`: an individual's score on predictor `\(x\)`

`\(z_i\)`: an individual's score on predictor `\(z\)`

`\(xz_i\)`: an individual's interaction term for `\(x\)` and `\(z\)`

`\(\epsilon_i\)`: an individual's residual

]

.pull-right[

`\(\beta_0\)`: the model's intercept

`\(\beta_1:\)` the slope associated with `\(x\)`

`\(\beta_2:\)` the slope associated with `\(z\)`

`\(\beta_3:\)` the slope associated with the interaction

]

---
### Effects in Linear Regression Models

+ **Main Effect:** the effect of predictors `\(x\)` on the outcome variable when the others predictors are held constant

+ When an interaction is present, the effect of predictor `\(x\)` changes as `\(z\)` changes, so we no longer interpret `\(\beta_x\)` in this way.

+ When we include an interaction in the model, these effects are now considered **marginal** or **conditional** effects rather than main effects as they are conditional upon the value of the other predictors. 

  + This is only true of the variables involved in the interaction.

  + The `\(\beta\)` values associated with other predictors still reflect main effects.


---
### Effects in Linear Regression Models

+ Consider the following equation:

`$$y_i = \beta_0 + \beta_1x_i + \beta_2z_i + \beta_4a_i + \beta_4c_i + \beta_5xz_i + \epsilon_i$$`
&gt; **Test Your Understanding:**

&gt; + Which `\(\beta\)` values reflect a **main effect**?

--

&gt; + Which `\(\beta\)` values reflect a **marginal effect**?

--

&gt; + Which `\(\beta\)` values reflect an **interaction**?


---
### Interpreting Continuous `\(\times\)` Continuous Interactions

`$$y_i = \beta_0 + \beta_1x_i + \beta_2z_i + \beta_5xz_i + \epsilon_i$$`
+ `\(\beta_0\)`/Intercept: value of `\(y\)` when both `\(x\)` and `\(z\)` are equal to 0

+ `\(\beta_1\)`: Effect of `\(x\)` on `\(y\)` when `\(z\)` is equal to 0.

+ `\(\beta_2\)`: Effect of `\(z\)` on `\(y\)` when `\(x\)` is equal to 0.

+ `\(\beta_3\)`: Change in slope of `\(x\)` on `\(y\)` across values of `\(z\)` (and vice versa).

---
class: center, inverse, middle

## Questions?

---
### Interactions &amp; Multicollinearity

+ Recall that when predictors are highly correlated, it is difficult for the model to tease apart their individual effects. 

+ Can you see any variables that may be correlated in the interaction equation?

`$$y_i = \beta_0 + \beta_1x_i + \beta_2z_i + \beta_5xz_i + \epsilon_i$$`

--

+ As the interaction term is calculated by multiplying variables `\(x\)` and `\(z\)`, it will almost certainly be highly correlated with each of these predictors

+ We can address this issue by **mean-centering** our predictors


---
### Mean-Centering

.pull-left[
+ When data are mean-centered, the mean of each predictor is subtracted from each observation of that predictor.

  + `\(x_i - \bar{x}\)`

+ In this way, the mean of the mean-centered predictor is equal to 0.
  + Values higher than 0 reflect observations that are greater than the mean
  + Values lower than 0 reflect observations that are less than the mean
]

--

.pull-right[
Consider this example, where `\(\bar{x} = 5\)`:
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; x &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x MC &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]


---
### Why does this affect collinearity?

+ Introducing negative data into `\(x\)` and `\(z\)` has an effect on the computed interaction terms.

+ When both values were positive, the product of `\(x\)` and `\(z\)` directly scaled with how large the predictor values were

  + Smaller predictor values led to smaller products, larger predictor values led to larger products

+ When negative values are introduced, if *both* `\(x\)` and `\(z\)` are negative or positive, it will produce a positive product. If one is negative, it will produce a negative product.

+ This reduces/removes the correlation between the predictors and the interaction term.


---
### Why does this affect collinearity?

.pull-left.center[

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:center;"&gt; x &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; z &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; xz &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 21 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`\(r_{x,\ xz} = 0.64\)`

`\(r_{z,\ xz} = 0.92\)`
]


.pull-right.center[

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:center;"&gt; xMC &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; zMC &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; xzMC &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; -2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1.67 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -3.34 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -1.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -1.33 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -1.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -2.66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; -3 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -3.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 9.99 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; -1.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 5.67 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 11.34 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`\(r_{xMC,\ xzMC} = -0.11\)`

`\(r_{zMC,\ xzMC} = 0.29\)`
]


---
### Does mean-centering affect our interpretation?

+ Mean-centering sets the means of our predictors to 0.

+ The intercept of our model ( `\(\beta_0\)`) reflects the value of `\(y\)` when all predictors are equal to 0.

+ The `\(\beta\)` of a predictor involved in an interaction reflects the effect of that predictor on the outcome when the other predictor is equal to 0.

+ The `\(\beta\)` of a predictor uninvolved in an interaction reflects the effect of that predictor on the outcome when the other predictors are held constant.


--

&gt; **Test Your Understanding:** When all predictors are mean-centered:

--

&gt; How is the intercept interpreted?

--

&gt; How is the `\(\beta\)` of a predictor involved in an interaction interpreted?

--

&gt; How is the `\(\beta\)` of a predictor uninvolved in an interaction interpreted?


---
class: center, inverse, middle

## Questions?

---

### Breaking Down a Continuous `\(\times\)` Continuous Interaction

+ Breaking down a categorical `\(\times\)` categorical interaction was relatively straightforward

  + We simply checked the association between the predictors and the outcome at all possible level combinations.

+ Breaking down a continuous `\(\times\)` continuous interaction is a bit more complicated; there are infinite level combinations!

+ To investigate these interactions further, we use **simple slopes analysis**.

---

### Simple Slopes Analysis

.pull-left[
+ A significant interaction effect suggests that `\(\beta_x\)` differs at varying levels of `\(z\)` 

+ Simple slopes analysis allows us to check whether this is the case.

+ With simple slopes analysis, we select certain points on `\(z\)` at which we investigate the relationship between `\(x\)` and `\(y\)`.

+ Commonly, the association between `\(x\)` and `\(y\)` is investigated at:
  + `\(\bar{z} + 1\ SD_z\)`
  + `\(\bar{z}\)`
  + `\(\bar{z} - 1\ SD_z\)`
  
]

--

.pull-right.center[

`\(\bar{z} = 100\)`

`\(SD_z = 15\)`

![](Week09_RegressionII_lecture_files/figure-html/unnamed-chunk-5-1.svg)&lt;!-- --&gt;

]

---

### Simple Slopes Analysis using PROCESS macro

.pull-left[
+ Simple Slopes analysis in SPSS is a complicated process, but it's much more straightforward if you use PROCESS.

+ This is an installable add-on to SPSS that can be used for both moderation and mediation models.

]


---
count: false

### Simple Slopes Analysis using PROCESS macro

.pull-left[
+ Simple Slopes analysis in SPSS is a complicated process, but it's much more straightforward if you use PROCESS.

+ This is an installable add-on to SPSS that can be used for both moderation and mediation models.

+ By default, it outputs the relationship between `\(x\)` and `\(y\)` at multiple levels of `\(z\)`, so you can see exactly where this relationship becomes significant.

+ To download, please [click this link](https://processmacro.org/download.html)

]

.pull-right[

&lt;img src="images/jnResults.png" width="1459" /&gt;


]

---
class: inverse, middle, center

## Questions?

---
## Using PROCESS macro

+ To illustrate the use of PROCESS, we'll use [this dataset]('https://mtruelovehill.github.io/PRM/Data/salaryDat.sav')

+ Key Variables:
  + `serv`: years of service at current place of employment
  + `perf`: most recent performance ratings
  + `salary`: current salary in thousands of pounds

+ Research Question:
 'Does the effect of years of service on salary differ based on job performance?'

+ Model:

`$$Salary_i = \beta_0 + \beta_1Salary_i\ + \beta_2Performance_i\ + \beta_3Salary_i\times Performance_i + \epsilon_i$$`

---
## Using PROCESS macro

+ **Step 1:** Add PROCESS to SPSS (once this is done, it will always be available)
  
+ **Step 2:** Open your data

+ **Step 3:** Navigate to *Analyze &gt; Regression &gt; PROCESS v4.2 by Andrew F. Hayes*

+ **Step 4:** Set up your model &amp; run it

+ Assuming you've already downloaded PROCESS macro from [this link](https://processmacro.org/download.html), let's continue in SPSS


---
## Using PROCESS macro

.pull-left[
&lt;img src="images/fullResults.png" width="1477" /&gt;
]

.pull-right[
&lt;img src="images/basicResults.png" width="1432" /&gt;
]

---
## Using PROCESS macro

---
## Using PROCESS macro

`$$Salary_i = \beta_0 + \beta_1Salary_i\ + \beta_2Performance_i\ + \beta_3Salary_i\times Performance_i + \epsilon_i$$`

.center[
&lt;img src="images/jnResults_breakdown.png" width="60%" /&gt;
]


---
## Using PROCESS macro

.pull-left[
&lt;img src="images/jnResults.png" width="1459" /&gt;
]

.pull-right[
&lt;img src="images/jnPlot.png" width="1533" /&gt;
]


---
class: center, inverse, middle

## Questions?


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
